import{b as S,e as $,a as v,f as b,t as w,g as A,X as _,E as e,d as j,h as P,i as E,j as F,k as M,c as f,l as T,m as x}from"./DTouipjj.js";import{u as N}from"./mqo6h4ut.js";import{u as O,P as R}from"./BQ7DdHPA.js";import{_ as q}from"./Bu1d48pB.js";import{i as C,u as G}from"./JvHQJYdn.js";import{R as I}from"./BgsBgB5O.js";const U=async(s,p,i,u)=>{const{$api:n}=S(),t=$(),g=v(),m=u?`usePage-${t}-${u}`:`usePage-${t}-${s||p}`,o=b(m,()=>({data:null}));return typeof i=="function"&&await i(async(c,d,l)=>{const y=l?`page-${t}-${l}`:`page-${t}-${c||d}`,{data:r,error:h}=await A(y,async()=>{try{const a=new _({siteId:t,id:c?+c:void 0,slug:c?void 0:d,fields:[e("id"),e("name"),e("slug"),e("siteId"),e("widgets"),e("pageType"),e("pageTemplateType"),e("seoSettings"),e("keywords"),e("metaTitle"),e("metaDescription")].join(",")});return l&&(a.id=null,a.slug=null,a.pageType=l),await(n==null?void 0:n.get(a))}catch(a){throw a}},"$7tMh7GfAmw");return O(h.value,r.value),N(r.value),g.setPage(r.value),o.value.data=r.value,r}),{...w(o.value)}},z=U,B=j({name:"WebSitePageTemplate",props:{site:{type:Object,required:!0},page:{type:Object,required:!0}},setup(s){const p=v(),i=x(),u=P(()=>p.isFreePlan),n=P(()=>{var o;return E((o=s.site)==null?void 0:o.favicon,i.public.staticFilesUrlPrefix,i.public.userFilesOrigin,u.value)}),{title:t,meta:g,seoMeta:m}=C(s.page,s.site,n.value);G({...m}),F({title:t,meta:g})},render(){if(!M(this.page))return f("div",{class:"kmb-site-page"},[f(q,null,{default:()=>[f("div",{class:T(R(this.page)),"data-page-template-type":this.page.pageTemplateType},[I(this.page,this.site)])]})])}});export{B as W,z as u};
